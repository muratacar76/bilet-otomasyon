@model LoginViewModel

@{
    ViewData["Title"] = "GiriÅŸ Yap - BULUTBÄ°LET.COM";
}

<div class="container">
    <div class="card" style="max-width: 500px; margin: 0 auto;">
        <h2>ğŸ” GiriÅŸ Yap</h2>
        <p>BULUTBÄ°LET.COM hesabÄ±nÄ±za giriÅŸ yapÄ±n</p>
        
        @if (!ViewData.ModelState.IsValid)
        {
            <div class="alert alert-danger">
                âš ï¸ LÃ¼tfen hatalarÄ± dÃ¼zeltin ve tekrar deneyin.
            </div>
        }

        <form asp-action="Login" method="post">
            <input asp-for="ReturnUrl" type="hidden" />
            
            <div class="form-group">
                <label asp-for="Email">E-posta Adresi</label>
                <input asp-for="Email" placeholder="ornek@email.com" />
                <span asp-validation-for="Email" class="field-validation-error"></span>
            </div>

            <div class="form-group">
                <label asp-for="Password">Åifre</label>
                <div style="position: relative;">
                    <input asp-for="Password" placeholder="Åifrenizi girin" />
                    <button type="button" onclick="togglePassword()" 
                            style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #666; cursor: pointer;">
                        ğŸ‘ï¸
                    </button>
                </div>
                <span asp-validation-for="Password" class="field-validation-error"></span>
            </div>

            <div class="form-group" style="display: flex; align-items: center; gap: 8px;">
                <input asp-for="RememberMe" type="checkbox" style="width: auto; margin: 0;" />
                <label asp-for="RememberMe" style="margin: 0;">Beni HatÄ±rla</label>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 20px;">
                ğŸ” GiriÅŸ Yap
            </button>
        </form>

        <div style="border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px;">
            <h3 style="text-align: center; color: #00bcd4; margin-bottom: 16px;">âœ¨ Ãœye olmadan devam edin</h3>
            <form asp-action="GuestLogin" method="post">
                <div class="form-group">
                    <label>E-posta Adresi</label>
                    <input type="email" name="email" placeholder="E-posta adresiniz" required />
                    <small style="color: #666; font-size: 12px;">
                        ğŸ’¡ Misafir giriÅŸi ile rezervasyon yapabilir, daha sonra Ã¼ye olabilirsiniz
                    </small>
                </div>
                <button type="submit" class="btn btn-secondary" style="width: 100%;">
                    ğŸ‘¤ Misafir GiriÅŸi
                </button>
            </form>
        </div>
        
        <div style="text-align: center; margin-top: 24px; padding-top: 20px; border-top: 1px solid #eee;">
            <p>
                HesabÄ±nÄ±z yok mu? 
                <a asp-action="Register" style="color: #00bcd4; text-decoration: none; font-weight: 600;">
                    Hemen kayÄ±t olun
                </a>
            </p>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function togglePassword() {
            const passwordInput = document.getElementById('Password');
            const toggleBtn = event.target;
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleBtn.textContent = 'ğŸ™ˆ';
            } else {
                passwordInput.type = 'password';
                toggleBtn.textContent = 'ğŸ‘ï¸';
            }
        }

        // Form validation and loading states
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.querySelector('form[asp-action="Login"]');
            const guestForm = document.querySelector('form[asp-action="GuestLogin"]');
            
            if (loginForm) {
                loginForm.addEventListener('submit', function() {
                    const submitBtn = this.querySelector('button[type="submit"]');
                    submitBtn.innerHTML = 'â³ GiriÅŸ yapÄ±lÄ±yor...';
                    submitBtn.disabled = true;
                });
            }
            
            if (guestForm) {
                guestForm.addEventListener('submit', function() {
                    const submitBtn = this.querySelector('button[type="submit"]');
                    submitBtn.innerHTML = 'â³ GiriÅŸ yapÄ±lÄ±yor...';
                    submitBtn.disabled = true;
                });
            }
            
            // Auto-focus on email input
            const emailInput = document.getElementById('Email');
            if (emailInput) {
                emailInput.focus();
            }
        });
    </script>
}